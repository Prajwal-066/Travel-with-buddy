<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - Travel with Buddy</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- Dark Mode CSS -->
    <link rel="stylesheet" href="css/dark-mode.css">
    <style>
        .payment-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            background-color: #fff;
        }
        
        .payment-method {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .payment-method:hover {
            border-color: #ced4da;
            background-color: #f8f9fa;
        }
        
        .payment-method.active {
            border-color: #4361ee;
            background-color: #f0f4ff;
        }
        
        .payment-method-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .payment-icon {
            font-size: 1.5rem;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-right: 15px;
            color: white;
        }
        
        .card-icon {
            background-color: #4361ee;
        }
        
        .upi-icon {
            background-color: #16a34a;
        }
        
        .cash-icon {
            background-color: #ca8a04;
        }
        
        .payment-content {
            margin-top: 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .payment-method.active .payment-content {
            max-height: 500px;
        }
        
        .card-icons img {
            height: 30px;
            margin-right: 8px;
        }
        
        .upi-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .upi-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 80px;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .upi-option:hover {
            background-color: #f0f4ff;
        }
        
        .upi-option img {
            width: 40px;
            height: 40px;
            margin-bottom: 5px;
        }
        
        .upi-option span {
            font-size: 12px;
            text-align: center;
        }
        
        .payment-card-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .card-input-group {
            margin-bottom: 1rem;
        }
        
        .card-input-group input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            transition: border-color 0.15s ease-in-out;
        }
        
        .card-input-group input:focus {
            border-color: #4361ee;
            outline: 0;
        }
        
        /* Dark mode adjustments */
        .dark-mode .payment-container {
            background-color: #2d3748;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.3);
        }
        
        .dark-mode .payment-method {
            border-color: #4a5568;
            background-color: #1a202c;
        }
        
        .dark-mode .payment-method:hover {
            background-color: #2d3748;
        }
        
        .dark-mode .payment-method.active {
            border-color: #4361ee;
            background-color: #2c3a67;
        }
        
        .dark-mode .upi-option:hover {
            background-color: #2d3748;
        }
        
        .ride-summary {
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
            margin-bottom: 20px;
        }
        
        .dark-mode .ride-summary {
            background-color: #1a202c;
        }
    </style>
</head>
<body>
    <!-- Header/Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <span class="fw-bold text-primary">Travel with Buddy</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="book-ride.html">Book a Ride</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="search-ride.html">For Drivers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary ms-lg-3" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login / Sign up</a>
                    </li>
                    <li class="nav-item ms-2 d-flex align-items-center">
                        <button id="darkModeBtn" class="btn btn-sm btn-outline-secondary">
                            <i id="darkModeIcon" class="fas fa-moon dark-mode-icon"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <h1 class="text-center mb-4">Complete Your Payment</h1>
                
                <div class="payment-container">
                    <!-- Ride Summary -->
                    <div class="ride-summary mb-4">
                        <h5><i class="fas fa-route me-2 text-primary"></i>Ride Summary</h5>
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="d-flex align-items-start mb-2">
                                    <i class="fas fa-circle text-success me-2 mt-1"></i>
                                    <div>
                                        <div class="text-muted small">Pickup</div>
                                        <div id="summaryPickup">Hinjewadi Phase 1, Pune</div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-start">
                                    <i class="fas fa-location-dot text-danger me-2 mt-1"></i>
                                    <div>
                                        <div class="text-muted small">Destination</div>
                                        <div id="summaryDestination">Koregaon Park, Pune</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex align-items-start mb-2">
                                    <i class="fas fa-car me-2 mt-1"></i>
                                    <div>
                                        <div class="text-muted small">Ride Type</div>
                                        <div id="summaryRideType">Car</div>
                                    </div>
                                </div>
                                <div class="d-flex align-items-start">
                                    <i class="fas fa-rupee-sign me-2 mt-1"></i>
                                    <div>
                                        <div class="text-muted small">Amount to Pay</div>
                                        <div id="summaryFare" class="fw-bold text-primary">₹250</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h5 class="mb-3">Select Payment Method</h5>
                    
                    <!-- Card Payment Method -->
                    <div class="payment-method active" data-method="card">
                        <div class="payment-method-header" data-bs-toggle="collapse" data-bs-target="#cardContent">
                            <div class="d-flex align-items-center">
                                <div class="payment-icon card-icon">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0">Credit/Debit Card</h6>
                                    <small class="text-muted">Pay securely with your card</small>
                                </div>
                            </div>
                            <div class="card-icons">
                                <img src="visa-brandmark-blue-1960x622.png" alt="Visa" width="80">
                                <img src="ma_symbol.svg" alt="Mastercard" width="50">
                                <img src="1200px-RuPay_Logo.png" alt="RuPay" width="50">
                            </div>
                        </div>
                        <div class="payment-content" id="cardContent">
                            <form id="cardPaymentForm">
                                <div class="card-input-group">
                                    <label for="cardNumber" class="form-label">Card Number</label>
                                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                                </div>
                                <div class="card-input-group">
                                    <label for="cardName" class="form-label">Name on Card</label>
                                    <input type="text" id="cardName" placeholder="John Smith">
                                </div>
                                <div class="payment-card-row">
                                    <div class="card-input-group">
                                        <label for="cardExpiry" class="form-label">Expiry Date</label>
                                        <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5">
                                    </div>
                                    <div class="card-input-group">
                                        <label for="cardCvv" class="form-label">CVV</label>
                                        <input type="password" id="cardCvv" placeholder="123" maxlength="3">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Pay ₹</button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- UPI Payment Method -->
                    <div class="payment-method" data-method="upi">
                        <div class="payment-method-header" data-bs-toggle="collapse" data-bs-target="#upiContent">
                            <div class="d-flex align-items-center">
                                <div class="payment-icon upi-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0">UPI</h6>
                                    <small class="text-muted">Pay using UPI apps</small>
                                </div>
                            </div>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="payment-content" id="upiContent">
                            <div class="mb-3">
                                <label for="upiId" class="form-label">Enter UPI ID</label>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" id="upiId" placeholder="yourname@upi">
                                    <button class="btn btn-primary" type="button">Verify</button>
                                </div>
                            </div>
                            
                            <p class="text-muted small">Or pay using UPI apps</p>
                            
                            <div class="upi-options">
                                <div class="upi-option">
                                    <img src="google-pay-mark_800.svg" alt="Google Pay" width="50" height="50">
                                    <span>Google Pay</span>
                                </div>
                                <div class="upi-option">
                                    <img src="https://www.codesign.in/codesign/wp-content/uploads/2021/03/Codesign-PhonePe-Beam-Construction.jpg" alt="PhonePe" width="50">
                                    <span>PhonePe</span>
                                </div>
                                <div class="upi-option">
                                    <img src="Paytm-Logo.PNG" alt="Paytm" width="50">
                                    <span>Paytm</span>
                                </div>
                                <div class="upi-option">
                                    <img src="BHIM_Preview.png" alt="BHIM" width="50">
                                    <span>BHIM UPI</span>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary w-100 mt-3">Pay with UPI</button>
                        </div>
                    </div>
                    
                    <!-- Cash Payment Method -->
                    <div class="payment-method" data-method="cash">
                        <div class="payment-method-header" data-bs-toggle="collapse" data-bs-target="#cashContent">
                            <div class="d-flex align-items-center">
                                <div class="payment-icon cash-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <div>
                                    <h6 class="mb-0">Cash</h6>
                                    <small class="text-muted">Pay cash to your buddy</small>
                                </div>
                            </div>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="payment-content" id="cashContent">
                            <div class="text-center py-2">
                                <i class="fas fa-money-bill-wave fa-3x text-success mb-3"></i>
                                <p class="mb-3">You'll pay ₹ in cash directly to your buddy after the ride.</p>
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Please ensure you have the exact amount ready. Your buddy may not have change available.
                                </div>
                                <button class="btn btn-primary w-100 mt-2">Confirm Cash Payment</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <button class="btn btn-outline-secondary me-2" id="backButton">
                            <i class="fas fa-arrow-left me-2"></i>Back
                        </button>
                        <button class="btn btn-success" id="proceedButton">
                            <i class="fas fa-check-circle me-2"></i>Complete Payment
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5 class="mb-3">Travel with Buddy</h5>
                    <p class="mb-3">Your trusted ride-sharing platform for safe and convenient travel.</p>
                    <div class="social-icons">
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-3">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-white text-decoration-none">Home</a></li>
                        <li class="mb-2"><a href="book-ride.html" class="text-white text-decoration-none">Book a Ride</a></li>
                        <li class="mb-2"><a href="about.html" class="text-white text-decoration-none">About Us</a></li>
                        <li><a href="contact.html" class="text-white text-decoration-none">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-3">Support</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Help Center</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Safety Center</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Community Guidelines</a></li>
                        <li><a href="#" class="text-white text-decoration-none">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-4">
                    <h5 class="mb-3">Contact Us</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> Ravet, Pimpri-Chinchwad, Pune, Maharashtra, India</li>
                        <li class="mb-2"><i class="fas fa-phone-alt me-2"></i> +91 8459237322</li>
                        <li><i class="fas fa-envelope me-2"></i> info@travelwithbuddy.com</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 Travel with Buddy. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Payment Success Modal -->
    <div class="modal fade" id="paymentSuccessModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title"><i class="fas fa-check-circle me-2"></i>Payment Successful!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center py-4">
                    <div class="mb-4">
                        <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
                    </div>
                    <h4>Thank You!</h4>
                    <p class="mb-3">Your payment has been processed successfully.</p>
                    <p class="mb-3">A confirmation has been sent to your email.</p>
                    <div class="alert alert-info">
                        <p class="mb-0"><i class="fas fa-info-circle me-2"></i>Your ride details have been saved to your account.</p>
                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <a href="index.html" class="btn btn-secondary me-2">
                        <i class="fas fa-home me-2"></i>Home
                    </a>
                    <a href="book-ride.html" class="btn btn-primary">
                        <i class="fas fa-car me-2"></i>Book Another Ride
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Config -->
    <script src="js/firebase-config.js"></script>
    
    <!-- Authentication Scripts -->
    <script src="js/auth.js"></script>

    <!-- Dark Mode Script -->
    <script src="js/dark-mode.js"></script>
    
    <!-- Payment Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get URL parameters to populate ride details
            const urlParams = new URLSearchParams(window.location.search);
            const pickup = urlParams.get('pickup') || 'Hinjewadi Phase 1, Pune';
            const destination = urlParams.get('destination') || 'Koregaon Park, Pune';
            const rideType = urlParams.get('rideType') || 'Car';
            const fare = urlParams.get('fare') || '₹250';
            
            // Update summary
            document.getElementById('summaryPickup').textContent = pickup;
            document.getElementById('summaryDestination').textContent = destination;
            document.getElementById('summaryRideType').textContent = rideType;
            document.getElementById('summaryFare').textContent = fare;
            
            // Payment method selection
            const paymentMethods = document.querySelectorAll('.payment-method');
            paymentMethods.forEach(method => {
                method.querySelector('.payment-method-header').addEventListener('click', function() {
                    // Remove active class from all methods
                    paymentMethods.forEach(m => m.classList.remove('active'));
                    // Add active class to clicked method
                    method.classList.add('active');
                });
            });
            
            // Card number formatting
            const cardNumberInput = document.getElementById('cardNumber');
            if (cardNumberInput) {
                cardNumberInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    let formattedValue = '';
                    
                    for (let i = 0; i < value.length; i++) {
                        if (i > 0 && i % 4 === 0) {
                            formattedValue += ' ';
                        }
                        formattedValue += value[i];
                    }
                    
                    e.target.value = formattedValue;
                });
            }
            
            // Card expiry formatting
            const cardExpiryInput = document.getElementById('cardExpiry');
            if (cardExpiryInput) {
                cardExpiryInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    
                    if (value.length > 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2, 4);
                    }
                    
                    e.target.value = value;
                });
            }
            
            // Form submission
            const cardForm = document.getElementById('cardPaymentForm');
            if (cardForm) {
                cardForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    processPayment('card');
                });
            }
            
            // Complete payment button
            const proceedButton = document.getElementById('proceedButton');
            if (proceedButton) {
                proceedButton.addEventListener('click', function() {
                    const activeMethod = document.querySelector('.payment-method.active');
                    if (activeMethod) {
                        processPayment(activeMethod.getAttribute('data-method'));
                    }
                });
            }
            
            // Back button
            const backButton = document.getElementById('backButton');
            if (backButton) {
                backButton.addEventListener('click', function() {
                    window.location.href = 'book-ride.html';
                });
            }
            
            // Process payment function
            function processPayment(method) {
                // Simulate payment processing
                const loadingBtn = document.querySelector('.payment-method.active button');
                if (loadingBtn) {
                    const originalText = loadingBtn.innerHTML;
                    loadingBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Processing...';
                    loadingBtn.disabled = true;
                    
                    setTimeout(() => {
                        loadingBtn.innerHTML = originalText;
                        loadingBtn.disabled = false;
                        
                        // Show success modal
                        const successModal = new bootstrap.Modal(document.getElementById('paymentSuccessModal'));
                        successModal.show();
                    }, 2000);
                }
            }
            
            // UPI options click handler
            const upiOptions = document.querySelectorAll('.upi-option');
            upiOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Simulate UPI app opening
                    alert(`Opening ${this.querySelector('span').textContent} app. Please complete payment there.`);
                });
            });
        });
    </script>
</body>
</html> 